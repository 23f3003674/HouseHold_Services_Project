{%extends "admin_layout.html"%}
{%block content%}

{%if professionals1%}
  <div class ="margin"><b>
    professionals
  </b></div>
  
        {%for p in professionals1%}
          {%for ul in user_logins %}
            {%if ul.professional_id == p.id and ul.status != "reject" %}
            <div class ="dashboard">
              <div class="container text-center">
                <div class="row">
                  <div class="col">
                    <div class="card" style="width: 18rem;">
   
                      <div class="card-body">
                        <h5 class="card-title">{{p.full_name}}</h5>
                        <p class="card-text">ID {{p.id}}</p>
                        <p class="card-text">EXPERIENCE {{p.experience}} YEARS</p>
                        <p>{%for s in services%}
                          {%if s.id == p.service_id%}
                            {{s.name}}
                          {%endif%}
                        {%endfor%}</p>

                          <form action ="/block_professional/{{name}}" method ="POST">
                            <input type ="hidden" name ="id" id ="id"  value = {{p.id}}>
                            <button type = "submit" class="btn btn-outline-danger">BLOCK</button>
                          </form>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {%endif%}
          {%endfor%}
        {%endfor%}

{%endif%}



{%if customers1%}
  <div class ="margin"><b>
    CUSTOMERS
  </b></div>
 
        {%for c in customers1%}
          {%for ul in user_logins %}
            {%if ul.customer_id == c.id and ul.status != "reject" %}
            <div class ="dashboard">
              <div class="container text-center">
                <div class="row">
                  <div class="col">
                    <div class="card" style="width: 18rem;">
   
                      <div class="card-body">
                        <h5 class="card-title">{{c.full_name}}</h5>
                        <p class="card-text">ID {{c.id}}</p>
                        <p class="card-text">PINCODE {{c.pincode}}</p>

                          <form action ="/block_customer/{{name}}" method ="POST">
                            <input type ="hidden" name ="id" id ="id"  value = {{c.id}}>
                            <button type = "submit" class="btn btn-outline-danger">BLOCK</button>
                          </form>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {%endif%}
          {%endfor%}
        {%endfor%}

{%endif%}


{%if services%}
  <div class ="margin"><b>
    SERVICES
  </b></div>
  <div class ="dashboard">
    <div class="container text-center">
      <div class="row">
        {%for service in services%}
          <div class="col">
            <div class="card" style="width: 18rem;">
   
              <div class="card-body">
                <h5 class="card-title">{{service.name}}</h5>
                <p class="card-text">ID {{service.id}}</p>
                <p>PRICE :{{service.base_price}}</p>
                <div class="mb-3">
                  <div class ="center">
                    <a href = "/edit_service/{{service.id}}/{{name}}" type = "button" class="btn btn-outline-warning">EDIT</a>
                    <a href ="/delete_service/{{service.id}}/{{name}}" type = "button" class="btn btn-outline-danger">DELETE</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {%endfor%}
      </div>
    </div>
  </div>
{%else%}
<h3 class="center">NO SERVICES AVAILABLE</h3>
{%endif%}

<div class="mb-3">
  <div class ="center"><a href="/service/{{name}}" type ="button" class="btn btn-primary">ADD SERVICE</a></div>
</div>

                  <div class = "margin"><b>
                    PROFESSIONALS REQUESTS
                  </b></div>
                  <div class ="dashboard">
                    <div class="container text-center">
                      <b><div class="row">
                        <div class="col">
                         ID
                        </div>
                        <div class="col">
                          NAME
                        </div>
                        <div class="col">
                          EXPERIENCE
                        </div>
                        <div class="col">
                          SERVICE NAME
                        </div>
                        <div class="col">
                          ACTION
                        </div>
                      </div></b>
                    </div>
                    <div class="container text-center">
                      <div class="margin1">
                        <!--{%if professionals%}-->
                        {%for ul in user_logins%}
                          {%if ul.status =='wait' %}
                          <!--{%for professional in professionals%}-->
                            {%if ul.professional_id == professional.id %}
                                <div class="row">
                                  <!--<div class="container text-center">-->
                                    <div class="col">
                                      {{professional.id}}
                                    </div>
                                    <div class="col">
                                      {{professional.full_name}}
                                    </div>
                                    <div class="col">
                                      {{professional.experience}}
                                    </div>
                                    <div class="col">
                                      {%for s in services%}
                                        {%if s.id == professional.service_id%}
                                          {{s.name}}
                                        {%endif%}
                                      {%endfor%}
                                    </div>
                                    <div class="col">
                                      <form action ="/update_professional/{{name}}" method ="POST">
                                        <input type ="hidden" name ="id" id ="id"  value = {{professional.id}}>
                                        <button type = "submit" name ="action" value="approve" class="btn btn-outline-success">APPROVE</button>
                                        <button type = "submit" name ="action" value="reject" class="btn btn-outline-danger">REJECT</button>
                                      </form>
                                    </div>
                                  <!--</div>-->
                                </div>
                            {%endif%}
                          <!--{%endfor%}-->
                          {%endif%}
                        {%endfor%}
                        <!--{%else%}
                          <h3 class="center">NO PROFESSIONAL AVAILABLE</h3>
                        {%endif%}-->

                      </div>
                    </div>
                  </div>
                
                {%if professionals%}
                  <div class = "margin"><b>
                    ALL PROFESSIONALS
                  </b></div>
                  <div class ="dashboard">
                    <div class="container text-center">
                      <b><div class="row">
                        <div class="col">
                         ID
                        </div>
                        <div class="col">
                          NAME
                        </div>
                        <div class="col">
                          EXPERIENCE
                        </div>
                        <div class="col">
                          SERVICE NAME
                        </div>
                        <div class="col">
                          ACTION
                        </div>
                      </div></b>
                    </div>
                    <div class="container text-center">
                      <div class="margin1">
                        <!--{%if professionals%}-->
                        {%for ul in user_logins%}
                          {%if ul.status =='approve' %}
                          <!--{%for professional in professionals%}-->
                            {%if ul.professional_id == professional.id %}
                                <div class="row">
                                  <!--<div class="container text-center">-->
                                    <div class="col">
                                      {{professional.id}}
                                    </div>
                                    <div class="col">
                                      {{professional.full_name}}
                                    </div>
                                    <div class="col">
                                      {{professional.experience}}
                                    </div>
                                    <div class="col">
                                      {%for s in services%}
                                        {%if s.id == professional.service_id%}
                                          {{s.name}}
                                        {%endif%}
                                      {%endfor%}
                                    </div>
                                    <div class="col">
                                      <form action ="/block_professional/{{name}}" method ="POST">
                                        <input type ="hidden" name ="id" id ="id"  value = {{professional.id}}>
                                        <button type = "submit" class="btn btn-outline-danger">BLOCK</button>
                                      </form>
                                    </div>
                                  <!--</div>-->
                                </div>
                            {%endif%}
                          <!--{%endfor%}-->
                          {%endif%}
                        {%endfor%}
                        <!--{%else%}
                          <h3 class="center">NO PROFESSIONAL AVAILABLE</h3>
                        {%endif%}-->

                      </div>
                    </div>
                  </div>
                {%endif%}


              {%if customers%}
                <div class = "margin"><b>
                  ALL CUSTOMERS
                </b></div>
                <div class ="dashboard">
                  <div class="container text-center">
                    <b><div class="row">
                      <div class="col">
                       ID
                      </div>
                      <div class="col">
                        NAME
                      </div>
                      <div class="col">
                        PINCODE
                      </div>
                      <!-- <div class="col">
                        SERVICE NAME
                      </div> -->
                      <div class="col">
                        ACTION
                      </div>
                    </div></b>
                  </div>
                  <div class="container text-center">
                    <div class="margin1">
                      
                        {%for c in customers%}
                          {%for ul in user_logins %}
                            {%if ul.customer_id == c.id and ul.status != "reject" %}
                        
                          
                              <div class="row">
                                <!--<div class="container text-center">-->
                                  <div class="col">
                                    {{c.id}}
                                  </div>
                                  <div class="col">
                                    {{c.full_name}}
                                  </div>
                                  <div class="col">
                                    {{c.pincode}}
                                  </div>
                                  
                                  <div class="col">
                                    <form action ="/block_customer/{{name}}" method ="POST">
                                      <input type ="hidden" name ="id" id ="id"  value = {{c.id}}>
                                      <button type = "submit" class="btn btn-outline-danger">BLOCK</button>
                                    </form>
                                  </div>
                                <!--</div>-->
                              </div>
                            {%endif%}
                          {%endfor%}  
                          
                        {%endfor%}
                      

                    </div>
                  </div>
                </div>
              {%endif%}

              {%if service_requests%}
                <div class = "margin"><b>
                  SERVICE REQUESTS
                </b></div>
                <div class ="dashboard">
                  <div class="container text-center">
                    <b><div class="row">
                      <div class="col">
                       ID
                      </div>
                      <div class="col">
                        SERVICE NAME
                      </div>
                      <div class="col">
                        CUSTOMER ID
                      </div>
                      <div class="col">
                        PROFESSIONAL ID
                      </div>
                      <div class="col">
                        RATING
                      </div>
                      <div class="col">
                        STATUS
                      </div>
                    </div></b>
                  </div>
                  <div class="container text-center">
                    <div class="margin1">
                      
                        {%for sr in service_requests%}
                          
                              <div class="row">
                                <!--<div class="container text-center">-->
                                  <div class="col">
                                    {{sr.id}}
                                  </div>
                                  <div class="col">
                                    {%for s in services%}
                                      {%if sr.service_id == s.id%}
                                        {{s.name}}
                                      {%endif%}
                                    {%endfor%} 
                                  </div>
                                  <div class="col">
                                    {{sr.customer_id}}
                                  </div>
                                  <div class="col">
                                    {{sr.professtional_id}}
                                  </div>
                                  <div class="col">
                                    {{sr.rating}}
                                  </div>
                                  <div class="col">
                                    {{sr.status}}
                                  </div>

                              
                                <!--</div>-->
                              </div>
                          
                        {%endfor%}
                      

                    </div>
                  </div>
                </div>
              {%endif%}



                  
{%endblock%}